**UrbanUniversity 2024**

**Дипломная Работа на тему:**

**Сравнение производительности и удобства использования различных ORM
(Object-Relational Mapping) библиотек: Django ORM, SQLAlchemy и Tortoise
ORM**

Задача

Разработать приложения для работы

с базами данных с использованием

Django ORM,

SQLAlchemy и

Tortoise ORM,

сравнить их.

Исполнитель Паспеков Николай Витальевич

24.11.2024 г.

1\. Обзор проекта:

\> Данный проект посвящен сравнению производительности и удобства
использования трех популярных библиотек Object-Relational Mapping (ORM)
для Python: Django ORM, SQLAlchemy и Tortoise ORM. Цель проекта ---
разработка трех функционально эквивалентных веб-приложений, каждое из
которых использует одну из указанных ORM для работы с базой данных, и
последующее сравнение этих приложений по критериям производительности,
удобства использования и функциональности. Результаты сравнения позволят
определить наиболее подходящую ORM для различных типов проектов.

2\. Структура проекта:

\> Проект будет состоять из трех отдельных подпроектов, каждый из
которых посвящен одной ORM:

\>

\> \* django_orm/: Веб-приложение на основе Django ORM.

\> \* sqlalchemy_app/: Веб-приложение на основе SQLAlchemy (с
использованием фреймворка FastAPI).

\> \* tortoise_orm/:Tortoise ORM работа с базой данных добавление
удаление

\>

\> Каждый подпроект будет иметь стандартную структуру, включающую
директории для моделей, представлений (views), маршрутизации (urls),
шаблонов и статических файлов.

подпроект Django приложение имеет главную страницу 2 категории продуктов
услуг Кардиология и Нутрициология в которых имеются продукты с ценами и
кнопкой купить.

Так же есть возможность зарегистрироваться пользователю. Есть и
некоторые ошибки сайт администрирования не работает так как я забыл
логин, пароль.

\> Подпроект SQLAlchemy простое приложение при переходе в Swagger
\..../doc. Есть возможность добавить, изменить, удалить пользователей и
задачи в 2 таблицах.

\> Подпроект Tortoise ORM приложение не закончено но есть возможность
взаимодействовать с таблицами базы данных на прямую. Имеется 3 таблицы
Пользователи, задачи, и продукты.

Эти таблицы можно изменять добавлять новых пользователей задачи и
продукты соответственно.

2\. Домашняя страница (Homepage) и Дашборд (Dashboard):

\> Домашняя страница: Простая стартовая страница с кратким описанием
проекта и ссылками на страницу входа и дашборд.

\>

\> Дашборд: Главная страница приложения, предоставляющая пользователю
возможность выполнять операции CRUD (создание, чтение, обновление,
удаление) записей в базе данных. Функциональность дашборда будет
одинаковой для всех трех приложений, обеспечивая справедливое сравнение.

4\. Страница авторизации (Login Page):

\> Страница авторизации: Для аутентификации пользователей будут
использоваться следующие механизмы:

\>

\> \* Django ORM: Встроенная система аутентификации Django.

\> \* SQLAlchemy: Библиотека для FastAPI).

\> \* Tortoise ORM: Библиотека, подходящая для выбранного фреймворка
(FastAPI).

5\. Шаблоны страниц (Page Templates):

\> Для создания шаблонов страниц будет использован движок шаблонов
Jinja2 (для SQLAlchemy и Tortoise) или встроенный движок шаблонов Django
(для Django ORM).

Стилевое оформление будет выполнено с использованием CSS, обеспечивая
визуальное сходство страниц для всех трех приложений.

6\. Заключение (Conclusion):

**Django ORM (Object-Relational Mapper)** --- мощный инструмент, но как
и у всего, у него есть свои плюсы и минусы.\
\
Плюсы:\
\
• Высокая производительность (в большинстве случаев): Django ORM
оптимизирован для работы с базой данных и в большинстве сценариев
предоставляет достаточную скорость.\
• Удобство использования: ORM значительно упрощает работу с базами
данных. Разработчикам не нужно писать сложные SQL-запросы вручную.
Вместо этого они могут использовать Python-код для выполнения операций с
данными.\
• Абстракция от базы данных: Django ORM позволяет легко переключаться
между различными базами данных (PostgreSQL, MySQL, SQLite, Oracle и др.)
без значительных изменений в коде приложения.\
• Интеграция с Django: Бесшовная интеграция с остальной частью
фреймворка Django. ORM прекрасно сочетается с другими компонентами,
такими как Django admin, и упрощает разработку веб-приложений.\
• Миграции: Система миграций позволяет отслеживать изменения в модели
данных и автоматически применять эти изменения к базе данных. Это
упрощает управление базами данных и снижает риск ошибок при
развертывании приложения.\
• Хороший выбор для большинства проектов: Для большинства веб-приложений
Django ORM предоставляет все необходимые функции и производительность.\
• Активное сообщество и хорошая документация: Большое и активное
сообщество помогает быстро находить решения проблем и получать
поддержку.\
• ORM поддерживает связи между таблицами: Легко реализовать сложные
связи между таблицами (one-to-one, one-to-many, many-to-many) используя
понятный Python синтаксис.\
\
\
Минусы:\
\
• Производительность может снизиться при сложных запросах: Для очень
сложных запросов, включающих множество JOIN\'ов и подзапросов,
производительность ORM может оказаться ниже, чем при написании ручных
SQL-запросов. В таких случаях оптимизация SQL-запросов вручную может
быть необходима.\
• Сложности с оптимизацией сложных запросов: Оптимизация
производительности запросов, генерируемых ORM, может быть сложной
задачей, особенно для разработчиков, не знакомых с SQL.\
\
• Зависимость от Django: ORM тесно связан с фреймворком Django, и это
может ограничить гибкость при использовании ORM вне контекста Django.\
• Кривая обучения: Хотя Django ORM относительно прост в использовании,
для эффективной работы с ним все равно требуется некоторое время на
обучение и освоение его особенностей.\
• Низкая производительность при больших объемах данных (в некоторых
случаях): При работе с очень большими объемами данных производительность
может быть недостаточной. В таких случаях могут потребоваться
специализированные решения, такие как использование NoSQL баз данных или
оптимизация запросов на уровне базы данных.\
\
В итоге, Django ORM --- это мощный и удобный инструмент, который хорошо
подходит для большинства проектов. Однако, для сложных задач или при
работе с очень большими объемами данных необходимо учитывать его
ограничения и использовать raw SQL запросы или альтернативные решения
для достижения оптимальной производительности. Взвешивание плюсов и
минусов зависит от конкретных требований

**SQLAlchemy** --- это мощный и гибкий Object-Relational Mapper (ORM)
для Python. Он предоставляет широкий спектр возможностей, но, как и у
любого инструмента, имеет свои преимущества и недостатки.\
\
Плюсы:\
\
• Гибкость и контроль: SQLAlchemy предлагает гораздо больший контроль
над базой данных, чем многие другие ORM. Можно писать как
высокоуровневый код с использованием ORM, так и низкоуровневые
SQL-запросы, или комбинировать оба подхода. Это позволяет оптимизировать
запросы и работать с базами данных в наиболее эффективном режиме.\
• Поддержка различных баз данных: SQLAlchemy поддерживает широкий спектр
баз данных, включая PostgreSQL, MySQL, SQLite, Oracle, MS SQL Server и
другие. Переключение между ними обычно не требует больших изменений в
коде.\
• Высокая производительность: Благодаря гибкости и возможности писать
собственные SQL-запросы, SQLAlchemy может достигать очень высокой
производительности, особенно при работе с большими объемами данных или
сложными запросами.\
• Масштабируемость: SQLAlchemy хорошо подходит для больших и сложных
приложений, позволяя эффективно управлять данными.\
\
\
Минусы:\
\
• Крутая кривая обучения: SQLAlchemy имеет значительно более крутую
кривую обучения, чем многие другие ORMs, такие как Django ORM. Понимание
всех его возможностей и тонкостей требует времени и усилий.\
• Сложная настройка: Настройка SQLAlchemy может быть сложной, особенно
для начинающих разработчиков. Требуется хорошее понимание принципов
работы баз данных и ORM.\
• Отладка может быть сложной: Отладка сложных запросов или проблем с
отображением объектов может быть сложной задачей.\
• Меньше готовых решений \"из коробки\": SQLAlchemy предоставляет меньше
готовых решений \"из коробки\" по сравнению с другими ORM. Вам может
потребоваться больше времени на разработку и настройку необходимых
функций.\
• Не подходит для очень простых проектов: Для очень маленьких и простых
проектов избыточная функциональность SQLAlchemy может оказаться не
нужна, и более простые ORM будут предпочтительнее.\
\
\
В итоге, SQLAlchemy --- это мощный и гибкий инструмент, идеально
подходящий для сложных проектов, где требуется высокий уровень контроля
над базой данных и высокая производительность. Однако, его крутая кривая
обучения и необходимость писать больше кода делают его менее подходящим
для начинающих разработчиков или простых проектов. Выбор между
SQLAlchemy и другими ORM зависит от специфических требований проекта и
опыта разработчика.

Tortoise ORM --- это относительно новый ORM для Python, вдохновлённый
Django ORM, но с асинхронной поддержкой, основанный на asyncio. Это
делает его привлекательным для современных, высокопроизводительных
приложений. Однако, его новизна также влечет за собой некоторые
недостатки.\
\
Плюсы:\
\
• Асинхронность: Это главный плюс Tortoise ORM. Он полностью
асинхронный, что позволяет ему эффективно работать в средах с большим
количеством параллельных запросов, например, в веб-фреймворках,
использующих asyncio, таких как FastAPI или aiohttp. Это существенно
повышает производительность в таких приложениях.\
• Простота использования (для знакомых с Django ORM): Если вы знакомы с
Django ORM, то освоить Tortoise ORM будет относительно легко, так как
синтаксис и многие концепции схожи.\
• Быстрая работа (в большинстве случаев): Благодаря асинхронности и
эффективной реализации, Tortoise ORM часто демонстрирует высокую
производительность.\
• Поддержка разных баз данных: Tortoise ORM поддерживает несколько баз
данных, включая PostgreSQL, MySQL, SQLite.\
• Миграции: Как и в Django, Tortoise ORM предоставляет удобный механизм
миграций для управления изменениями в схеме базы данных.\
• Активное сообщество (растет): Хотя сообщество меньше, чем у Django ORM
или SQLAlchemy, оно активно развивается и предоставляет поддержку.\
• Легковесность: Tortoise ORM меньше по размеру и имеет меньше
зависимостей, чем некоторые другие ORM.\
\
\
Минусы:\
\
• Новизна и меньшее сообщество: Поскольку Tortoise ORM сравнительно
молод, его сообщество меньше, чем у более зрелых ORM. Это может означать
меньше доступных ресурсов, туториалов и готовых решений.\
• Меньше документации (по сравнению с другими ORM): Документация, хотя и
постоянно улучшается, все еще может быть менее полной и детальной, чем у
более устоявшихся ORM.\
• Незрелость некоторых функций: Некоторые функции могут быть еще не
полностью доработаны или иметь ограничения по сравнению с более зрелыми
ORM.\
• Меньше готовых интеграций: Из-за новизны Tortoise ORM может быть
меньше готовых интеграций с другими библиотеками и фреймворками.\
• Кривая обучения (для новичков в asyncio): Хотя синтаксис похож на
Django ORM, необходимость работы с asyncio может стать препятствием для
разработчиков, не знакомых с асинхронным программированием.\
• Некоторые возможности могут быть менее развиты: Некоторые продвинутые
функции, доступные в других ORMs, могут быть реализованы в Tortoise ORM
не так полно или вообще отсутствовать.\
\
\
В заключение:\
\
Tortoise ORM --- отличный выбор для проектов, где асинхронность
критична, особенно в сочетании с современными асинхронными
веб-фреймворками. Однако, его новизна влечет за собой некоторые риски,
связанные с меньшим сообществом, менее полной документацией и
потенциальными недоработками некоторых функций. Если вы опытный
разработчик и понимаете асинхронное программирование, и вам нужна
высокая производительность в асинхронной среде, то Tortoise ORM может
быть отличным вариантом. Для начинающих или проектов, где асинхронность
не является первостепенной, другие ORM могут быть более подходящим
выбором.

Давайте сравним Django ORM, SQLAlchemy и Tortoise ORM по нескольким
ключевым аспектам:\
\
1. Уровень абстракции и гибкость:\
\
• Django ORM: Высокий уровень абстракции. Прост в использовании, но
предоставляет меньше контроля над генерируемыми SQL-запросами. Хорошо
подходит для быстрой разработки, но ограничен в возможностях оптимизации
сложных запросов.\
• SQLAlchemy: Очень гибкий. Предлагает как высокоуровневый ORM (схожий
по удобству с Django ORM, но мощнее), так и низкоуровневый доступ к базе
данных через Core. Позволяет писать собственные SQL-запросы и тонко
настраивать взаимодействие с базой данных. Более сложен в освоении.\
• Tortoise ORM: Средний уровень абстракции. Более гибкий, чем Django
ORM, но менее гибкий, чем SQLAlchemy. Позволяет некоторый контроль над
SQL, но не в такой степени, как SQLAlchemy.\
\
\
2. Производительность:\
\
• Django ORM: Достаточно быстр для большинства приложений. Может
замедляться при очень сложных запросах.\
• SQLAlchemy: Высокая производительность, особенно при использовании
низкоуровневого доступа или при написании оптимизированных
SQL-запросов.\
• Tortoise ORM: Высокая производительность благодаря асинхронности.
Особенно эффективен в асинхронных приложениях.\
\
\
3. Асинхронность:\
\
• Django ORM: Синхронный.\
• SQLAlchemy: Синхронный (хотя есть асинхронные расширения, но это не
основная часть).\
• Tortoise ORM: Полностью асинхронный.\
\
\
4. Кривая обучения:\
\
• Django ORM: Низкая. Прост в освоении, особенно для начинающих.\
• SQLAlchemy: Высокая. Требует значительных усилий для полного освоения
всех возможностей.\
• Tortoise ORM: Средняя. Проще SQLAlchemy, но сложнее Django ORM,
особенно для разработчиков, не знакомых с asyncio.\
\
\
5. Сообщество и поддержка:\
\
• Django ORM: Огромное и активное сообщество. Много ресурсов,
документации и готовых решений.\
• SQLAlchemy: Большое и активное сообщество. Много ресурсов, но кривая
обучения высока.\
• Tortoise ORM: Меньшее и менее опытное сообщество, чем у Django ORM и
SQLAlchemy. Документация постоянно улучшается.\
\
\
6. Поддержка баз данных:\
\
• Django ORM: Хорошая поддержка многих популярных баз данных.\
• SQLAlchemy: Отлично поддерживает широкий спектр баз данных.\
• Tortoise ORM: Поддерживает ряд популярных баз данных, но может быть
меньше опций, чем у SQLAlchemy.\
\
\
7. Миграции:\
\
• Django ORM: Хорошо реализована система миграций.\
• SQLAlchemy: Есть система миграций, но она может быть сложнее в
использовании, чем в Django ORM.\
• Tortoise ORM: Хорошо реализована система миграций, аналогичная Django
ORM.\
\
\
В итоге:\
\
• Django ORM: Отличный выбор для быстрой разработки, простых и средних
по сложности проектов. Прост в освоении, но может быть ограничен в
производительности при очень сложных запросах.\
\
• SQLAlchemy: Мощный и гибкий инструмент для сложных проектов, где
требуется максимальный контроль над базой данных и высокая
производительность. Требует значительных усилий для освоения.\
\
• Tortoise ORM: Лучший выбор для асинхронных приложений, где
производительность и эффективное использование ресурсов имеют решающее
значение. Требует знакомства с asyncio.\
\
\
Выбор ORM зависит от специфических требований проекта и опыта
разработчика. Для маленьких проектов Django ORM может быть достаточно.
Для больших и сложных проектов, требующих высокой производительности и
гибкости, SQLAlchemy может быть лучшим выбором, а Tortoise ORM - для
асинхронных.

7\. Приложение 1. Пример файловой структуры проекта: (See previous
response for a detailed example)

**[Diplom_project_1]{.underline}**

**Django_ORM**

[Base_patient]{.underline}

[Base_patient]{.underline}

*\_\_init\_.py\_*

*asgi.py*

*hash_hash.py*

*setting.py*

*urls.py*

*wsgi.py*

[task]{.underline}

[migrations]{.underline}

*0001.py*

*0002.py*

*0003.py*

*0004.py*

*0005.py*

*0006.py*

*0007.py*

*\_init\_.py*

*\_init\_.py*

*admin.py*

*apps.py*

*forms.py*

*models.py*

*test.py*

*views.py*

[templates]{.underline}

*cardio.html*

*main_page.html*

*menu.html*

*nutrio.html*

*registration_compl.html*

*registration_page.html*

*db.sqlite3*

*manage.py*

**SQLAlchemy**

[app]{.underline}

b[ackend]{.underline}

*db.py*

*db_depends.py*

[models]{.underline}

*\_init\_.py*

*task.py*

*user.py*

[routers]{.underline}

*\_init\_.py*

*task.py*

*user.py*

*\_init\_.py*

*alembic.ini*

*main.py*

*schemas.py*

**Tortoise_ORM**

[aerich]{.underline}

\_*init\_.py*

*models.py*

[migrations]{.underline}

[models]{.underline}

*0_20241124183458_init.py*

*1_20241124183523_update.py*

*2_20241124214032_update.py*

[task]{.underline}

*\_init\_.py*

*models.py*

[user]{.underline}

*\_init\_.py*

*models.py*

*aerich_config.py*

*manage_product.py*

*product.db*

*pyproject.toml*

*tortoise_test.py*

**requirements.txt**

8\. Приложение 2. Список необходимых библиотек: (See previous response
for a detailed list)

aiosqlite==0.20.0\
alembic==1.14.0\
Django==5.1.3\
fastapi==0.115.5\
pydantic==2.9.2\
python-slugify==8.0.4\
SQLAlchemy==2.0.36\
tortoise-orm==0.21.7\
uvicorn==0.32.0
